"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createDataConnector = void 0;
const path = require("path");
const filesystemutil_1 = require("./filesystemutil");
const installationutil_1 = require("./installationutil");
const package_1 = require("./package");
const theme_1 = require("./theme");
async function createDataConnector(name, isInternal, skipSDKDependency) {
    console.log((0, theme_1.success)('Creating data connector in dataconnectors/' + name));
    const source = path.join(__dirname, '..', 'templates', 'dataconnector');
    const targetFolder = path.join('dataconnectors', name);
    (0, filesystemutil_1.copyFolderRecursiveSync)(source, targetFolder);
    await (0, package_1.modifyManifest)((manifest) => {
        if (!manifest['dataConnectors']) {
            manifest['dataConnectors'] = [];
        }
        manifest['dataConnectors'].push({
            'name': name,
            'oauthProviderName': '',
            'callbackBaseUrl': '',
            'dataActions': {},
        });
    });
    console.log(`Installing dependencies`);
    process.chdir(targetFolder);
    (0, installationutil_1.installDependenciesIfNeeded)(isInternal, skipSDKDependency);
}
exports.createDataConnector = createDataConnector;
