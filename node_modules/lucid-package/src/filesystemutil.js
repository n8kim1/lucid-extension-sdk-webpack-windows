"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNormalizedZipPath = exports.copyFolderRecursiveSync = exports.copyFileSync = void 0;
const fs = require("fs");
const path = require("path");
function copyFileSync(source, target) {
    var targetFile = target;
    // If target is a directory, a new file with the same name will be created
    if (fs.existsSync(target)) {
        if (fs.lstatSync(target).isDirectory()) {
            targetFile = path.join(target, path.basename(source));
        }
    }
    fs.writeFileSync(targetFile, fs.readFileSync(source));
}
exports.copyFileSync = copyFileSync;
function copyFolderRecursiveSync(source, targetFolder) {
    var files = [];
    // Check if folder needs to be created or integrated
    if (!fs.existsSync(targetFolder)) {
        fs.mkdirSync(targetFolder, { recursive: true });
    }
    // Copy
    if (fs.lstatSync(source).isDirectory()) {
        files = fs.readdirSync(source);
        files.forEach((file) => {
            var curSource = path.join(source, file);
            if (fs.lstatSync(curSource).isDirectory()) {
                copyFolderRecursiveSync(curSource, path.join(targetFolder, file));
            }
            else {
                copyFileSync(curSource, targetFolder);
            }
        });
    }
}
exports.copyFolderRecursiveSync = copyFolderRecursiveSync;
/**
 * On Windows machines '\' is used as the file separator. To ensure that we correctly zip files on Windows
 * machines we replace '\' with '/'.
 */
function getNormalizedZipPath(rawPath) {
    return path.sep === '\\' ? rawPath.replace(/\\/g, '/') : rawPath;
}
exports.getNormalizedZipPath = getNormalizedZipPath;
