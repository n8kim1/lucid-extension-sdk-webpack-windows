"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isSerializedFields = exports.isSerializedJsonFieldType = exports.isSerializedFieldType = exports.isSerializedTimeObject = exports.isSerializedLucidDateObject = exports.isSerializedIsoDateObject = exports.isSerializedMillisecondsDateObject = exports.isSerializedLucidCurrency = exports.isSerializedLucidDictionary = exports.isJsonSerializedLucidDictionary = exports.isNestedSerializedLucidDictionary = exports.isSerializedColorObjectFieldType = void 0;
const checks_1 = require("../../checks");
const validators_1 = require("../../validators/validators");
function isSerializedColorObjectFieldType(value) {
    return (0, checks_1.isObjectUnsafe)(value) && (0, checks_1.isObject)(value['color']);
}
exports.isSerializedColorObjectFieldType = isSerializedColorObjectFieldType;
/** a dictionary type that has full type support */
exports.isNestedSerializedLucidDictionary = (0, validators_1.strictObjectValidator)({
    'dict': (0, validators_1.mapValidator)(isSerializedFieldType),
});
/** a dictionary type that only supports raw js, primarily used when external data could be arbritrary js */
exports.isJsonSerializedLucidDictionary = (0, validators_1.strictObjectValidator)({
    'js': (0, validators_1.mapValidator)(isSerializedJsonFieldType),
});
exports.isSerializedLucidDictionary = (0, validators_1.either)(exports.isNestedSerializedLucidDictionary, exports.isJsonSerializedLucidDictionary);
exports.isSerializedLucidCurrency = (0, validators_1.objectValidator)({
    'a': checks_1.isNumber,
    't': checks_1.isString,
});
exports.isSerializedMillisecondsDateObject = (0, validators_1.objectValidator)({
    'ms': checks_1.isNumber,
    'isDateOnly': (0, validators_1.option)(checks_1.isBoolean),
});
exports.isSerializedIsoDateObject = (0, validators_1.objectValidator)({
    'isoDate': checks_1.isString,
    'displayTimezone': (0, validators_1.nullableOption)(checks_1.isString),
});
exports.isSerializedLucidDateObject = (0, validators_1.either)(exports.isSerializedMillisecondsDateObject, exports.isSerializedIsoDateObject);
exports.isSerializedTimeObject = (0, validators_1.objectValidator)({
    'hours': checks_1.isNumber,
    'minutes': (0, validators_1.option)(checks_1.isNumber),
    'seconds': (0, validators_1.option)(checks_1.isNumber),
});
function isSerializedFieldType(value) {
    return (value == null ||
        (0, checks_1.isNumber)(value) ||
        (0, checks_1.isString)(value) ||
        (0, checks_1.isBoolean)(value) ||
        (0, exports.isSerializedLucidDictionary)(value) ||
        (0, exports.isSerializedLucidCurrency)(value) ||
        ((0, checks_1.isArray)(value) && value.every(isSerializedFieldType)) ||
        (0, exports.isSerializedLucidDateObject)(value) ||
        (0, exports.isSerializedTimeObject)(value) ||
        isSerializedColorObjectFieldType(value));
}
exports.isSerializedFieldType = isSerializedFieldType;
function isSerializedJsonFieldType(value) {
    return (value == null ||
        (0, checks_1.isNumber)(value) ||
        (0, checks_1.isString)(value) ||
        (0, checks_1.isBoolean)(value) ||
        ((0, checks_1.isArray)(value) && value.every(isSerializedJsonFieldType)) ||
        ((0, checks_1.isObject)(value) && Object.values(value).every(isSerializedJsonFieldType)));
}
exports.isSerializedJsonFieldType = isSerializedJsonFieldType;
exports.isSerializedFields = (0, validators_1.objectOfValidator)(isSerializedFieldType);
