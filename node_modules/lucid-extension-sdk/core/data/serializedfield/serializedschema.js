"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isSerializedSchema = void 0;
const checks_1 = require("../../checks");
const validators_1 = require("../../validators/validators");
const serializedfielddefinition_1 = require("./serializedfielddefinition");
function isSerializedSchema(schema) {
    if (!(0, checks_1.isObjectUnsafe)(schema)) {
        return false;
    }
    const fields = schema['Fields'];
    const primaryKey = schema['PrimaryKey'];
    const fieldLabelOverrides = schema['FieldLabelOverrides'];
    const validOverrides = (0, checks_1.isDefAndNotNull)(fieldLabelOverrides)
        ? (0, checks_1.isRecord)(checks_1.isString)(fieldLabelOverrides) && !(0, checks_1.isArray)(fieldLabelOverrides)
        : true; // Optional field
    return ((0, checks_1.isTypedArray)(serializedfielddefinition_1.isSerializedFieldDefinition)(fields) &&
        (0, validators_1.arrayValidator)(serializedfielddefinition_1.isSerializedFieldDefinition)(fields) &&
        (0, checks_1.isArray)(primaryKey) &&
        primaryKey.every(checks_1.isString) &&
        validOverrides);
}
exports.isSerializedSchema = isSerializedSchema;
