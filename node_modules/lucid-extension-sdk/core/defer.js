"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defer = void 0;
function checkPromiseExists() {
    if (typeof Promise !== 'function') {
        throw new Error('No promise library available');
    }
}
function defer() {
    checkPromiseExists();
    let resolve = undefined;
    let reject = undefined;
    const promise = new Promise((resolveLocal, rejectLocal) => {
        resolve = resolveLocal;
        reject = rejectLocal;
    });
    if (!resolve || !reject) {
        throw new Error('Promise constructor does not provide proper arguments to callback');
    }
    return {
        resolve: resolve,
        reject: reject,
        promise: promise,
        then: promise.then.bind(promise),
        catch: promise.catch.bind(promise),
        finally: promise.finally.bind(promise),
        [Symbol.toStringTag]: promise[Symbol.toStringTag],
    };
}
exports.defer = defer;
