"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AuthorizationFlowHandlerRegistry = void 0;
class AuthorizationFlowHandlerRegistry {
    static nextHookName() {
        return '__authorizationflow__hook' + AuthorizationFlowHandlerRegistry.nextHookId++;
    }
    /**
     * Register a function to be run at a given stage of the authorization flow for a provider.
     *
     * @param client A reference to the editor client.
     * @param callback The function to run when the handler is triggered.
     * @param stage The stage during the auth flow when this handler is triggered.
     * @param provider The name of the auth provider (as specified in the package's manifest.json)
     * that triggers this handler.
     */
    static registerAuthorizationFlowHandler(client, callback, stage, provider) {
        const actionHookName = AuthorizationFlowHandlerRegistry.nextHookName();
        client.registerAction(actionHookName, callback);
        const serialized = {
            'c': actionHookName,
            's': stage,
            'p': provider,
        };
        client.sendCommand("aafh" /* CommandName.AddAuthorizationFlowHandler */, serialized);
    }
}
exports.AuthorizationFlowHandlerRegistry = AuthorizationFlowHandlerRegistry;
AuthorizationFlowHandlerRegistry.nextHookId = 0;
