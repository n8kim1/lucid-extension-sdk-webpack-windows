"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PropertyStoreProxy = void 0;
const mapproxy_1 = require("./mapproxy");
/**
 * Base class for anything on a Lucid document that has an ID and properties.
 */
class PropertyStoreProxy {
    /**
     *
     * @param id ID of this element
     * @param client
     */
    constructor(id, client) {
        this.id = id;
        this.client = client;
        /**
         * All properties available on this element, organized by name.
         * Not all properties are writeable (e.g. "ClassName" on a block).
         * To move or resize elements, use setLocation() or setBoundingBox() or offset() instead.
         */
        this.properties = new mapproxy_1.WriteableMapProxy(() => this.client.sendCommand("lpr" /* CommandName.ListProperties */, { 'id': this.id }), (name) => this.client.sendCommand("gp" /* CommandName.GetProperty */, {
            'id': this.id,
            'p': name,
        }), (name, value) => {
            if (name === 'BoundingBox') {
                throw new Error('Do not use properties.set() to move or resize items; use setLocation() or setBoundingBox() or offset()');
            }
            this.client.sendCommand("sp" /* CommandName.SetProperty */, {
                'id': this.id,
                'p': name,
                'v': value,
            });
        });
    }
}
exports.PropertyStoreProxy = PropertyStoreProxy;
